
%%%%%%%%
\section{Wire Protocol}

\subsection{Background}

The Silverking wire protocol is optimized to reduce the need for data copies and
allow for data streaming.

\subsection{Messages}

\begin{verbatim}
Common

NumberOfBuffers	(4)
MessageType		(1)
Context		(8)

BufferLength[0]	(4)
	...
BufferLength[NumberOfBuffers – 1]		(4)

Put

(Context is namespace)

OptionsByteBuffer
	Version	(8)
	Compression		(1)		
	UserDataLength	(1)		COMPLETE THIS
	UserData		(0-255)		COMPLETE THIS
KeyByteBuffer
	Entry
		Key 		(16)
		BufferIndex	(2)
		BufferOffset	(4)
		UncompressedValueSize	(4)
		CompressedValueSize	(4)
SharedValueBuffers
	...
DedicatedValueBuffers
	...

RetrievalResult

(Context is namespace)

CHANGE RETRIEVAL RESULT TO READ FROM DATA BUFFERS WHERE POSSIBLE

OptionsByteBuffer
	-- nothing currently --
KeyByteBuffer
	Entry
		Key 		(16)
		BufferIndex	(2)
		BufferOffset	(4)
		CompressedValueSize	(4)
		UserDataLength	(1)	COMPLETE THIS	? BUFFER
		UserData	(0-.255)	COMPLETE THIS	? BUFFER
	...
SharedValueBuffers
	...
DedicatedValueBuffers
	...
	...
\end{verbatim}

